import{j as e,q as C,s as k,t as w,i as P,r as T,S as b,l as v,W as z,g as A,u as E,Z as S,d as R,f as M,p as V}from"./react-vendor-DpeMiI2M.js";import{u as F}from"./useVaultForm-BD_dQTz4.js";import{a as H,b as I}from"./index-CQ2kwkCc.js";import"./vendor-DYLXRpC5.js";function $({products:l=[],onChange:i,maxProducts:d=5}){const x=[{value:"food",label:"üçî Comida"},{value:"drink",label:"üç∫ Bebida"},{value:"service",label:"üõ†Ô∏è Servi√ßo"},{value:"digital",label:"üíª Digital"},{value:"physical",label:"üì¶ F√≠sico"}],p=()=>{l.length<d&&i([...l,{id:Date.now(),name:"",price:"",category:"food",margin:"medium",isHero:l.length===0}])},m=r=>{const s=l.filter(a=>a.id!==r);s.length>0&&!s.some(a=>a.isHero)&&(s[0].isHero=!0),i(s)},o=(r,s,a)=>{i(l.map(n=>n.id===r?{...n,[s]:a}:n))},u=r=>{i(l.map(s=>({...s,isHero:s.id===r})))};return e.jsxs("div",{className:"space-y-4",children:[l.map((r,s)=>e.jsxs("div",{className:`
                        relative p-4 rounded-xl border transition-all
                        ${r.isHero?"bg-orange-500/10 border-orange-500/30":"bg-[var(--bg-panel)] border-[var(--border-subtle)] hover:border-[var(--border-active)]"}
                    `,children:[r.isHero&&e.jsx("div",{className:"absolute -top-2 left-4 px-2 py-0.5 bg-orange-500 text-white text-[10px] font-bold uppercase tracking-wider rounded",children:"Carro-Chefe"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-gray-600 mt-3",children:e.jsx(C,{size:16})}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider block mb-1",children:"Nome"}),e.jsx("input",{type:"text","data-testid":`v2-product-name-${s}`,value:r.name,onChange:a=>o(r.id,"name",a.target.value),placeholder:"Ex: Combo Premium",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider block mb-1",children:"Pre√ßo"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"R$"}),e.jsx("input",{type:"number",value:r.price,onChange:a=>o(r.id,"price",a.target.value),placeholder:"0.00",className:"input-field pl-10 font-mono"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider block mb-1",children:"Categoria"}),e.jsx("select",{value:r.category,onChange:a=>o(r.id,"category",a.target.value),className:"input-field",children:x.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[!r.isHero&&e.jsx("button",{type:"button",onClick:()=>u(r.id),className:"p-2 text-gray-500 hover:text-orange-400 transition-colors",title:"Definir como Carro-Chefe",children:e.jsx(k,{size:16})}),e.jsx("button",{type:"button",onClick:()=>m(r.id),className:"p-2 text-gray-500 hover:text-red-400 transition-colors",title:"Remover Produto",children:e.jsx(w,{size:16})})]})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Margem:"}),e.jsx("div",{className:"flex gap-2",children:["low","medium","high"].map(a=>e.jsx("button",{type:"button",onClick:()=>o(r.id,"margin",a),className:`
                                        px-3 py-1 rounded-full text-xs font-medium transition-all
                                        ${r.margin===a?a==="high"?"bg-green-500/20 text-green-400 border border-green-500/30":a==="medium"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-[var(--bg-panel)] text-[var(--text-secondary)] border border-transparent hover:border-[var(--border-subtle)]"}
                                    `,children:a==="high"?"Alta":a==="medium"?"M√©dia":"Baixa"},a))})]})]},r.id)),l.length<d&&e.jsxs("button",{type:"button",onClick:p,"data-testid":"v2-add-product",className:"w-full p-4 border-2 border-dashed border-[var(--border-subtle)] rounded-xl text-[var(--text-secondary)] hover:text-white hover:border-[var(--border-active)] transition-all flex items-center justify-center gap-2 group",children:[e.jsx(P,{size:20,className:"group-hover:scale-110 transition-transform"}),e.jsxs("span",{children:["Adicionar Produto (",l.length,"/",d,")"]})]}),l.length===0&&e.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:"Nenhum produto adicionado. Clique no bot√£o acima para come√ßar."})]})}const D=[{value:"none",label:"Nenhuma estrat√©gia definida"},{value:"combo",label:"üçî Combo (Produto + Complemento com desconto)"},{value:"bundle",label:"üì¶ Bundle (Pacote de produtos)"},{value:"premium",label:"‚≠ê Vers√£o Premium (Upgrade)"},{value:"quantidade",label:"üî¢ Desconto por Quantidade"},{value:"assinatura",label:"üîÑ Assinatura / Recorr√™ncia"}];function q({formData:l,setFormData:i,onNext:d}){const{formData:x,updateField:p,updateFields:m,isSynced:o,saveAndAdvance:u}=F("V2"),{addToast:r}=H(),s=x||l||{},a=p||((t,c)=>i==null?void 0:i({...s,[t]:c})),[n,g]=T.useState(!1),j=t=>{t.preventDefault(),u(d,"Vault 2 (Commerce)")},h=async t=>{g(!0);try{const c=await I.generateVaultContent("s2",s,t);m?m(c):Object.entries(c).forEach(([f,y])=>a(f,y)),r({title:"Inspira√ß√£o Aplicada! ‚ú®",description:t==="all"?"Conceito completo gerado.":"Campos vazios preenchidos.",type:"success"})}catch(c){r({title:"Erro na IA",description:c.message,type:"error"})}finally{g(!1)}},N=s.products||[];return e.jsxs("form",{onSubmit:j,className:"space-y-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-warning mb-2",children:[e.jsx(b,{size:24}),e.jsx("span",{className:"text-mono-data uppercase",children:"VAULT 2 ‚Ä¢ COMMERCE"})]}),e.jsx("h2",{className:"text-title text-2xl",children:"Economia & Oferta"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>h("empty"),disabled:n,className:"btn-ghost !px-3 !py-2 !h-auto flex items-center gap-2 text-xs",title:"Preencher apenas campos vazios",children:[n?e.jsx(v,{size:14,className:"animate-spin"}):e.jsx(z,{size:14}),"Completar Vazios"]}),e.jsxs("button",{type:"button",onClick:()=>h("all"),disabled:n,className:"btn-primary !px-3 !py-2 !h-auto flex items-center gap-2 text-xs bg-orange-500 hover:bg-orange-600 border-orange-400",title:"Gerar conceito completo (sobrescreve)",children:[n?e.jsx(v,{size:14,className:"animate-spin"}):e.jsx(A,{size:14}),"Inspirar Tudo"]})]})]}),e.jsxs("p",{className:"text-body max-w-xl",children:["O que vamos vender e como? Estruture seu cat√°logo para o ",e.jsx("strong",{children:"S2 (Commerce Vault)"}),"."]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-subtitle flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-warning/20 text-warning rounded flex items-center justify-center text-xs",children:"1"}),e.jsx(b,{size:16,className:"text-warning"}),"Cat√°logo de Produtos"]}),e.jsx("p",{className:"text-caption",children:'Adicione seus principais produtos. O primeiro √© automaticamente marcado como "Carro-Chefe" (usado em campanhas).'}),e.jsx($,{products:N,onChange:t=>a("products",t),maxProducts:5})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-300 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-orange-500/20 text-orange-400 rounded flex items-center justify-center text-xs",children:"2"}),e.jsx(E,{size:16,className:"text-orange-400"}),"M√©tricas Financeiras"]}),e.jsxs("div",{className:"vault-room vault-room-body",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Ticket M√©dio Atual"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Valor m√©dio por compra hoje"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",className:"input-field pl-10 font-mono text-lg",placeholder:"0.00",value:s.currentTicket||"",onChange:t=>a("currentTicket",t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Meta de Ticket M√©dio"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Onde queremos chegar"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",className:"input-field pl-10 font-mono text-lg",placeholder:"0.00",value:s.targetTicket||"",onChange:t=>a("targetTicket",t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Faturamento Mensal Atual"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Baseline para metas"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",className:"input-field pl-10 font-mono text-lg",placeholder:"0.00",value:s.currentRevenue||"",onChange:t=>a("currentRevenue",t.target.value)})]})]})]}),s.currentTicket&&s.targetTicket&&e.jsx("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16,className:Number(s.targetTicket)>Number(s.currentTicket)?"text-green-400":"text-red-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:Number(s.targetTicket)>Number(s.currentTicket)?`Meta: +${((Number(s.targetTicket)/Number(s.currentTicket)-1)*100).toFixed(0)}% de aumento no ticket`:"Meta abaixo do atual"})]})})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-300 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-orange-500/20 text-orange-400 rounded flex items-center justify-center text-xs",children:"3"}),e.jsx(R,{size:16,className:"text-orange-400"}),"Estrat√©gia de Venda"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Estrat√©gia de Upsell"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Como voc√™ aumenta o valor de cada venda?"}),e.jsx("select",{className:"input-field",value:s.upsellStrategy||"none",onChange:t=>a("upsellStrategy",t.target.value),children:D.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Formato Principal de Venda"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Como o cliente compra de voc√™?"}),e.jsxs("select",{className:"input-field",value:s.saleFormat||"presencial",onChange:t=>a("saleFormat",t.target.value),children:[e.jsx("option",{value:"presencial",children:"üè™ Presencial (Loja/Balc√£o)"}),e.jsx("option",{value:"delivery",children:"üõµ Delivery"}),e.jsx("option",{value:"ecommerce",children:"üõí E-commerce"}),e.jsx("option",{value:"whatsapp",children:"üì± WhatsApp"}),e.jsx("option",{value:"agendamento",children:"üìÖ Agendamento"}),e.jsx("option",{value:"misto",children:"üîÑ Misto"})]})]})]}),e.jsxs("div",{className:"bg-orange-500/5 border border-orange-500/20 rounded-xl p-6",children:[e.jsx("h4",{className:"font-medium text-white mb-4",children:"Produto Isca"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Qual produto voc√™ usa para atrair clientes novos? (Geralmente baixa margem, alto volume)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Nome do Produto Isca"}),e.jsx("input",{className:"input-field",placeholder:"Ex: Happy Hour com 50% off na primeira rodada",value:s.baitProduct||"",onChange:t=>a("baitProduct",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Pre√ßo Promocional"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",className:"input-field pl-10 font-mono",placeholder:"0.00",value:s.baitPrice||"",onChange:t=>a("baitPrice",t.target.value)})]})]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-300 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-orange-500/20 text-orange-400 rounded flex items-center justify-center text-xs",children:"4"}),"Refer√™ncias de Mercado"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Concorrente 1"}),e.jsx("input",{className:"input-field",placeholder:"Nome do concorrente",value:s.competitor1||"",onChange:t=>a("competitor1",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Concorrente 2"}),e.jsx("input",{className:"input-field",placeholder:"Nome do concorrente",value:s.competitor2||"",onChange:t=>a("competitor2",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Concorrente 3"}),e.jsx("input",{className:"input-field",placeholder:"Nome do concorrente",value:s.competitor3||"",onChange:t=>a("competitor3",t.target.value)})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Cite at√© 3 concorrentes para refer√™ncia. A IA usar√° para diferenciar sua comunica√ß√£o."})]}),e.jsxs("div",{className:"vault-footer",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm",children:o?e.jsxs("span",{className:"flex items-center gap-1.5 text-green-400",children:[e.jsx(M,{size:14})," Sincronizado"]}):e.jsxs("span",{className:"flex items-center gap-1.5 text-yellow-400 animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"})," Salvando..."]})}),e.jsxs("button",{type:"submit","data-testid":"v2-save-next",className:"btn-primary-lg",children:["Salvar e Avan√ßar para V3 ",e.jsx(V,{size:20})]})]})]})}export{q as PageOffer};
