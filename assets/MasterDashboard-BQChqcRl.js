import{r as i,j as e,x as k,az as L,u as z,A as S,Q as I,ax as R,p as D,U as $}from"./react-vendor-DpeMiI2M.js";import{u as B,s as d}from"./index-CQ2kwkCc.js";import"./vendor-DYLXRpC5.js";function E({onSelectClient:x,onLogout:N}){const{t}=B(),[m,y]=i.useState(""),[o,w]=i.useState("all"),a=i.useMemo(()=>{const s=typeof d.listClientIds=="function"?d.listClientIds():[],n=["C1","C2"];return Array.from(new Set([...n,...s])).filter(Boolean).map(c=>{var p,v,j,f;const r=d.loadClientData(c),u=Number(((v=(p=r==null?void 0:r.kpis)==null?void 0:p.revenue)==null?void 0:v.value)||0),g=Number(((f=(j=r==null?void 0:r.kpis)==null?void 0:j.revenue)==null?void 0:f.goal)||0),A=g>0&&u<g*.8?"attention":"on_track";return{id:c,name:(r==null?void 0:r.clientName)||`Client ${c}`,agency:"Local",revenue:u,status:A,kpis:r==null?void 0:r.kpis}})},[]),b=i.useMemo(()=>[{id:"LOCAL",name:"Local",clients:a.map(s=>s.id)}],[a]),_=a.filter(s=>{const n=s.name.toLowerCase().includes(m.toLowerCase()),h=o==="all"||s.agency===o;return n&&h}),C=a.reduce((s,n)=>s+n.revenue,0),l=a.filter(s=>s.status==="attention").length;return e.jsxs("div",{className:"min-h-screen bg-[var(--bg-deep)] text-white font-sans selection:bg-white/20",children:[e.jsxs("header",{className:"h-14 border-b border-[var(--border-subtle)] flex items-center justify-between px-6 bg-[var(--bg-deep)] sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-blue-600 flex items-center justify-center font-bold text-sm",children:"M"}),e.jsx("span",{className:"text-subtitle",children:t("dashboard.master.bravvo_master")}),e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-blue-500/10 text-blue-400 border border-blue-500/20 font-bold uppercase tracking-widest",children:t("dashboard.master.admin")})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-[var(--bg-surface)] border border-[var(--border-subtle)] rounded text-xs text-gray-400 focus-within:border-white/20 transition-colors",children:[e.jsx(k,{size:12}),e.jsx("input",{placeholder:t("dashboard.actions.search_wide"),value:m,onChange:s=>y(s.target.value),className:"bg-transparent outline-none w-48 focus:w-64 transition-all placeholder-gray-600"})]}),e.jsx("button",{onClick:N,className:"p-2 hover:bg-white/10 rounded text-gray-500 hover:text-white transition-colors",title:t("dashboard.actions.logout"),children:e.jsx(L,{size:16})}),e.jsx("div",{className:"w-7 h-7 rounded bg-gray-700 border border-white/10"})]})]}),e.jsxs("main",{className:"p-6 max-w-[1600px] mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bento-grid p-5 bento-cell group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-label",children:t("dashboard.master.global_revenue")}),e.jsx("div",{className:"p-1 bg-green-500/10 rounded text-green-500",children:e.jsx(z,{size:14})})]}),e.jsxs("h2",{className:"text-metric-lg font-mono group-hover:text-success transition-colors",children:["R$ ",(C||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]}),e.jsxs("div",{className:"bento-grid p-5 bento-cell group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-label",children:t("dashboard.master.total_clients")}),e.jsx(M,{count:a.length})]}),e.jsx("h2",{className:"text-metric-lg font-mono group-hover:text-info transition-colors",children:a.length}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-2 font-mono",children:t("dashboard.master.across_agencies").replace("{count}",b.length)})]}),e.jsxs("div",{className:"bento-grid p-5 bento-cell group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-label",children:t("dashboard.master.system_health")}),e.jsx(S,{className:l>0?"text-red-500":"text-green-500",size:14})]}),e.jsx("h2",{className:"text-metric-lg font-mono",children:l>0?`${l} ${t("dashboard.master.risks")}`:"100% OK"}),e.jsxs("p",{className:"text-[10px] text-gray-500 mt-2 font-mono",children:[l," ",t("dashboard.master.requires_attention")]})]})]}),e.jsxs("div",{className:"bento-grid",children:[e.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] flex items-center justify-between bg-[var(--bg-surface)]",children:[e.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-2 uppercase tracking-wide",children:[e.jsx(I,{size:14,className:"text-blue-500"}),"Audit Log & Access"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Agency Filter:"}),e.jsxs("select",{value:o,onChange:s=>w(s.target.value),className:"bg-[#111] text-[10px] text-white border border-white/10 rounded px-2 py-1 outline-none focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Agencies"}),e.jsx("option",{value:"Direto",children:"Direct Clients"}),b.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"grid grid-cols-[80px_1fr_1fr_150px_100px_120px] gap-4 px-6 py-3 border-b border-[var(--border-subtle)] bg-[#080808]",children:[e.jsx("div",{className:"text-label",children:"ID"}),e.jsx("div",{className:"text-label",children:t("dashboard.master.client_name")}),e.jsx("div",{className:"text-label",children:t("dashboard.master.agency_owner")}),e.jsx("div",{className:"text-label",children:t("dashboard.master.revenue")}),e.jsx("div",{className:"text-label text-center",children:t("dashboard.master.status")}),e.jsx("div",{className:"text-label text-right",children:t("dashboard.master.action")})]}),e.jsx("div",{className:"bg-[var(--bg-deep)]",children:_.map(s=>e.jsxs("div",{className:"grid grid-cols-[80px_1fr_1fr_150px_100px_120px] gap-4 px-6 py-3 border-b border-[var(--border-subtle)] hover:bg-[var(--bg-surface)] group transition-colors items-center",children:[e.jsx("div",{className:"text-mono-data text-gray-500",children:s.id}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-white/5 border border-white/10 flex items-center justify-center text-[10px] font-bold text-gray-400",children:s.name.charAt(0)}),e.jsx("span",{className:"font-bold text-xs text-gray-200 group-hover:text-white transition-colors",children:s.name})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded bg-white/5 border border-white/5 text-[10px] text-gray-400",children:[e.jsx(R,{size:10}),s.agency]})}),e.jsxs("div",{className:"text-mono-data text-gray-300",children:["R$ ",s.revenue.toLocaleString()]}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full ${s.status==="on_track"?"bg-green-500":"bg-red-500 animate-pulse"}`})}),e.jsx("div",{className:"text-right opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{onClick:()=>x(s),className:"px-3 py-1 text-[10px] font-bold bg-blue-500/10 text-blue-400 hover:bg-blue-500 hover:text-white rounded border border-blue-500/20 hover:border-blue-500 transition-all flex items-center gap-1 ml-auto",children:["Access Admin ",e.jsx(D,{size:10})]})})]},s.id))})]})]})]})]})}function M({count:x}){return e.jsx("div",{className:"flex items-center gap-1 text-blue-500",children:e.jsx($,{size:14})})}export{E as MasterDashboard};
