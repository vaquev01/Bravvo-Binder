import{r as d,j as e,e as b,l as w,W as q,g as C,$ as z,t as I,i as p,a0 as S,a1 as k,f as G}from"./react-vendor-DpeMiI2M.js";import{u as U}from"./useVaultForm-BD_dQTz4.js";import{a as Y,b as H}from"./index-CQ2kwkCc.js";import"./vendor-DYLXRpC5.js";const J=["ConteÃºdo","PromoÃ§Ã£o","LanÃ§amento","Sazonal","TendÃªncia","Reels","Stories","Carrossel","Collab"],R=[{value:"post",label:"ðŸ“¸ Post"},{value:"reel",label:"ðŸŽ¬ Reel"},{value:"story",label:"ðŸ“± Story"},{value:"website",label:"ðŸŒ Website"},{value:"competitor",label:"ðŸ‘¥ Concorrente"},{value:"inspiration",label:"âœ¨ InspiraÃ§Ã£o"}];function Z({formData:D,setFormData:m,onComplete:E}){const{formData:T,updateField:A,updateFields:v,isSynced:L,saveAndAdvance:F}=U("V5"),{addToast:g}=Y(),l=T||D||{},i=A||((s,t)=>m==null?void 0:m({...l,[s]:t})),[j,u]=d.useState(!1),[f,h]=d.useState(!1),[a,n]=d.useState({title:"",description:"",url:"",tags:[]}),[r,c]=d.useState({title:"",url:"",type:"post",notes:""}),[x,N]=d.useState(!1),y=async s=>{N(!0);try{const t=await H.generateVaultContent("s5",l,s);v?v(t):Object.entries(t).forEach(([o,_])=>i(o,_)),g({title:"InspiraÃ§Ã£o Aplicada! âœ¨",description:s==="all"?"Conceito completo gerado.":"Campos vazios preenchidos.",type:"success"})}catch(t){g({title:"Erro na IA",description:t.message,type:"error"})}finally{N(!1)}},P=s=>{s.preventDefault(),F(E,"Vault 5 (Ideas)")},V=()=>{if(!a.title.trim())return;const s={id:`IDEA-${Date.now()}`,...a,createdAt:new Date().toISOString()};i("ideas",[...l.ideas||[],s]),n({title:"",description:"",url:"",tags:[]}),u(!1)},$=s=>{i("ideas",(l.ideas||[]).filter(t=>t.id!==s))},B=s=>{a.tags.includes(s)?n({...a,tags:a.tags.filter(t=>t!==s)}):n({...a,tags:[...a.tags,s]})},W=()=>{if(!r.title.trim())return;const s={id:`REF-${Date.now()}`,...r,createdAt:new Date().toISOString()};i("references",[...l.references||[],s]),c({title:"",url:"",type:"post",notes:""}),h(!1)},O=s=>{i("references",(l.references||[]).filter(t=>t.id!==s))};return e.jsxs("form",{className:"space-y-10 animate-fadeIn pb-24",onSubmit:P,children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-warning/20 rounded-xl flex items-center justify-center",children:e.jsx(b,{size:20,className:"text-warning"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"text-title text-2xl",children:"V5 â€¢ Ideas Vault"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>y("empty"),disabled:x,className:"btn-ghost !px-3 !py-2 !h-auto flex items-center gap-2 text-xs",title:"Preencher apenas campos vazios",children:[x?e.jsx(w,{size:14,className:"animate-spin"}):e.jsx(q,{size:14}),"Completar Vazios"]}),e.jsxs("button",{type:"button",onClick:()=>y("all"),disabled:x,className:"btn-primary !px-3 !py-2 !h-auto flex items-center gap-2 text-xs bg-yellow-600 hover:bg-yellow-500 border-yellow-500",title:"Gerar conceito completo (sobrescreve)",children:[x?e.jsx(w,{size:14,className:"animate-spin"}):e.jsx(C,{size:14}),"Inspirar Tudo"]})]})]}),e.jsx("p",{className:"text-body",children:"Banco de ideias, referÃªncias e anotaÃ§Ãµes rÃ¡pidas"})]})]})}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-section flex items-center gap-2",children:[e.jsx(b,{size:16,className:"text-warning"}),"Banco de Ideias"]}),e.jsx("p",{className:"text-caption -mt-4",children:"Deposite aqui suas ideias de conteÃºdo para usar depois"}),e.jsxs("div",{className:"space-y-3",children:[(l.ideas||[]).length===0&&!j&&e.jsxs("div",{className:"card-elevated border-dashed p-8 text-center",children:[e.jsx(b,{size:32,className:"text-[var(--text-tertiary)] mx-auto mb-3"}),e.jsx("p",{className:"text-caption",children:"Nenhuma ideia cadastrada ainda"})]}),(l.ideas||[]).map(s=>{var t;return e.jsx("div",{"data-testid":`v5-idea-${s.id}`,className:"card-elevated p-4 group hover:border-warning/30 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-subtitle",children:s.title}),s.url&&e.jsx("a",{href:s.url.startsWith("http")?s.url:`https://${s.url}`,target:"_blank",rel:"noopener noreferrer",className:"text-warning hover:text-warning/80",children:e.jsx(z,{size:14})})]}),s.description&&e.jsx("p",{className:"text-body mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[(t=s.tags)==null?void 0:t.map(o=>e.jsx("span",{className:"text-[10px] bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded",children:o},o)),e.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(s.createdAt).toLocaleDateString("pt-BR")})]})]}),e.jsx("button",{type:"button",onClick:()=>$(s.id),className:"p-1.5 rounded text-gray-600 hover:text-red-400 hover:bg-red-500/10 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(I,{size:14})})]})},s.id)})]}),j?e.jsxs("div",{className:"bg-yellow-500/5 border border-yellow-500/20 rounded-xl p-4 space-y-4 animate-fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"TÃ­tulo da Ideia"}),e.jsx("input",{className:"input-field","data-testid":"v5-idea-title",placeholder:"Ex: Reels com bastidores",value:a.title,onChange:s=>n({...a,title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Link (opcional)"}),e.jsx("input",{className:"input-field",placeholder:"URL de referÃªncia",value:a.url,onChange:s=>n({...a,url:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"DescriÃ§Ã£o"}),e.jsx("textarea",{className:"input-field min-h-[80px] resize-none",placeholder:"Detalhes sobre a ideia...",value:a.description,onChange:s=>n({...a,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:J.map(s=>e.jsx("button",{type:"button",onClick:()=>B(s),className:`px-3 py-1 rounded-full text-xs font-medium border transition-all ${a.tags.includes(s)?"bg-yellow-500 text-black border-yellow-500":"bg-[var(--bg-panel)] text-[var(--text-secondary)] border-[var(--border-subtle)] hover:border-[var(--border-active)]"}`,children:s},s))})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-sm text-gray-400 hover:text-white",children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:V,"data-testid":"v5-save-idea",className:"px-4 py-2 bg-yellow-500 text-black rounded-lg font-medium text-sm hover:bg-yellow-400 transition-colors flex items-center gap-2",children:[e.jsx(p,{size:14}),"Salvar Ideia"]})]})]}):e.jsxs("button",{type:"button",onClick:()=>u(!0),"data-testid":"v5-new-idea",className:"w-full py-3 border border-dashed border-[var(--border-subtle)] rounded-lg text-sm text-[var(--text-secondary)] hover:text-white hover:border-yellow-500/40 transition-colors flex items-center justify-center gap-2",children:[e.jsx(p,{size:16}),"Nova Ideia"]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(S,{size:16,className:"text-blue-400"}),"ReferÃªncias de ConteÃºdo"]}),e.jsx("p",{className:"text-sm text-gray-500 -mt-4",children:"Links de inspiraÃ§Ã£o, posts de concorrentes, referÃªncias visuais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(l.references||[]).length===0&&!f&&e.jsxs("div",{className:"col-span-2 bg-[var(--bg-panel)] border border-dashed border-[var(--border-subtle)] rounded-xl p-8 text-center",children:[e.jsx(S,{size:32,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma referÃªncia salva"})]}),(l.references||[]).map(s=>{var t;return e.jsxs("div",{className:"bg-[var(--bg-panel)] border border-[var(--border-subtle)] rounded-xl p-4 group hover:border-blue-500/30 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded",children:((t=R.find(o=>o.value===s.type))==null?void 0:t.label)||s.type}),e.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(s.createdAt).toLocaleDateString("pt-BR")})]}),e.jsx("button",{type:"button",onClick:()=>O(s.id),className:"p-1 rounded text-gray-600 hover:text-red-400 hover:bg-red-500/10 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(I,{size:14})})]}),e.jsx("h4",{className:"font-medium text-white mb-1",children:s.title}),s.notes&&e.jsx("p",{className:"text-xs text-gray-400 mb-2 line-clamp-2",children:s.notes}),s.url&&e.jsxs("a",{href:s.url.startsWith("http")?s.url:`https://${s.url}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 flex items-center gap-1 truncate",children:[e.jsx(z,{size:10}),s.url]})]},s.id)})]}),f?e.jsxs("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-xl p-4 space-y-4 animate-fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"TÃ­tulo"}),e.jsx("input",{className:"input-field",placeholder:"Nome da referÃªncia",value:r.title,onChange:s=>c({...r,title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tipo"}),e.jsx("select",{className:"input-field",value:r.type,onChange:s=>c({...r,type:s.target.value}),children:R.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Link"}),e.jsx("input",{className:"input-field",placeholder:"https://...",value:r.url,onChange:s=>c({...r,url:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Notas"}),e.jsx("textarea",{className:"input-field min-h-[60px] resize-none",placeholder:"Por que essa referÃªncia Ã© interessante?",value:r.notes,onChange:s=>c({...r,notes:s.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-sm text-gray-400 hover:text-white",children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:W,className:"px-4 py-2 bg-blue-500 text-white rounded-lg font-medium text-sm hover:bg-blue-600 transition-colors flex items-center gap-2",children:[e.jsx(p,{size:14}),"Salvar ReferÃªncia"]})]})]}):e.jsxs("button",{type:"button",onClick:()=>h(!0),className:"w-full py-3 border border-dashed border-[var(--border-subtle)] rounded-lg text-sm text-[var(--text-secondary)] hover:text-white hover:border-blue-500/40 transition-colors flex items-center justify-center gap-2",children:[e.jsx(p,{size:16}),"Nova ReferÃªncia"]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(k,{size:16,className:"text-purple-400"}),"Bloco de Notas"]}),e.jsx("p",{className:"text-sm text-gray-500 -mt-4",children:"AnotaÃ§Ãµes rÃ¡pidas, brainstorm, rascunhos"}),e.jsxs("div",{className:"vault-room overflow-hidden",children:[e.jsxs("div",{className:"bg-purple-500/10 border-b border-[var(--border-subtle)] px-4 py-2 flex items-center gap-2",children:[e.jsx(k,{size:14,className:"text-purple-400"}),e.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"NOTEPAD"})]}),e.jsx("textarea",{className:"w-full bg-transparent text-[var(--text-primary)] p-4 min-h-[200px] resize-none focus:outline-none font-mono text-sm placeholder-[var(--text-tertiary)]",placeholder:`Digite suas anotaÃ§Ãµes aqui...

â€¢ Ideias soltas
â€¢ Brainstorm de campanhas
â€¢ Lembretes rÃ¡pidos
â€¢ TendÃªncias para acompanhar`,value:l.notepad||"",onChange:s=>i("notepad",s.target.value)}),e.jsxs("div",{className:"bg-[var(--bg-panel)] border-t border-[var(--border-subtle)] px-4 py-2 flex justify-between items-center",children:[e.jsxs("span",{className:"text-[10px] text-gray-600",children:[(l.notepad||"").length," caracteres"]}),e.jsx("span",{className:"text-[10px] text-gray-600",children:"Auto-save ativo"})]})]})]}),e.jsxs("div",{className:"vault-footer",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm",children:L?e.jsxs("span",{className:"flex items-center gap-1.5 text-green-400",children:[e.jsx(G,{size:14})," Sincronizado"]}):e.jsxs("span",{className:"flex items-center gap-1.5 text-yellow-400 animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"})," Salvando..."]})}),e.jsxs("button",{type:"submit","data-testid":"v5-complete",className:"btn-primary-lg",children:[e.jsx(C,{size:18}),"Concluir V5"]})]})]})}export{Z as PageIdeas};
