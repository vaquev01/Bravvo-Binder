import{r as S,j as e,ay as D,x as T,az as E,u as A,U as L,aA as R,aB as G,p as H}from"./react-vendor-DpeMiI2M.js";import{u as q,s as g}from"./index-CQ2kwkCc.js";import"./vendor-DYLXRpC5.js";function V({onSelectClient:B,onLogout:$}){const{t:s}=q(),[o,M]=S.useState("overview"),n=S.useMemo(()=>{const a=typeof g.listClientIds=="function"?g.listClientIds():[],r=["C1","C2"];return Array.from(new Set([...r,...a])).filter(Boolean).map(i=>{var b,p,u,v,j,f,N,y,w,k,C,z,_,I;const t=g.loadClientData(i),d=Number(((p=(b=t==null?void 0:t.kpis)==null?void 0:b.revenue)==null?void 0:p.value)||0),c=Number(((v=(u=t==null?void 0:t.kpis)==null?void 0:u.revenue)==null?void 0:v.goal)||0),m=c>0&&d<c*.8?"attention":"healthy",U=((y=(N=(f=(j=t==null?void 0:t.vaults)==null?void 0:j.S4)==null?void 0:f.matrix)==null?void 0:N.find(h=>(h==null?void 0:h.role)==="Aprovador Final"))==null?void 0:y.who)||((C=(k=(w=t==null?void 0:t.vaults)==null?void 0:w.S4)==null?void 0:k.owners)==null?void 0:C.content)||((I=(_=(z=t==null?void 0:t.vaults)==null?void 0:z.S4)==null?void 0:_.owners)==null?void 0:I.traffic)||"";return{id:i,name:(t==null?void 0:t.clientName)||`Client ${i}`,kpis:t==null?void 0:t.kpis,revenue:d,responsible:U,status:m}})},[]),x={totalRevenue:n.reduce((a,r)=>{var l,i;return a+(((i=(l=r.kpis)==null?void 0:l.revenue)==null?void 0:i.value)||0)},0),activeClients:n.length,pendingApprovals:0,avgHealth:n.length>0?Math.round(n.reduce((a,r)=>{var t,d,c,m;const l=Number(((d=(t=r==null?void 0:r.kpis)==null?void 0:t.revenue)==null?void 0:d.goal)||0),i=Number(((m=(c=r==null?void 0:r.kpis)==null?void 0:c.revenue)==null?void 0:m.value)||0);return l<=0?a+100:a+Math.min(100,Math.round(i/l*100))},0)/n.length):100};return e.jsxs("div",{className:"min-h-screen bg-[var(--bg-deep)] text-white font-sans selection:bg-white/20","data-testid":"agency-dashboard",children:[e.jsxs("header",{className:"h-14 border-b border-[var(--border-subtle)] flex items-center justify-between px-6 bg-[var(--bg-deep)] sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-white flex items-center justify-center",children:e.jsx(D,{size:18,className:"text-black",strokeWidth:2.5})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-label",children:s("dashboard.agency.command_center")}),e.jsx("span",{className:"text-subtitle",children:s("dashboard.agency.bravvo_hq")})]})]}),e.jsx("div",{className:"flex items-center gap-6",children:e.jsx("div",{className:"hidden md:flex items-center gap-1 bg-[var(--bg-surface)] p-1 rounded-lg border border-[var(--border-subtle)]",children:[{id:"overview",label:s("dashboard.nav.overview")},{id:"financials",label:s("dashboard.nav.financials")},{id:"team",label:s("dashboard.nav.team")},{id:"audit",label:s("dashboard.nav.audit")}].map(a=>e.jsx("button",{onClick:()=>M(a.id),className:`px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wide rounded ${o===a.id?"bg-white text-black shadow-sm signature-glow":"text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-white/5"} transition-all`,children:a.label},a.id))})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-[var(--bg-surface)] border border-[var(--border-subtle)] rounded text-xs text-gray-400 group focus-within:border-white/20 transition-colors",children:[e.jsx(T,{size:12}),e.jsx("input",{className:"bg-transparent outline-none w-24 focus:w-48 transition-all placeholder-gray-600",placeholder:s("dashboard.actions.search")}),e.jsx("span",{className:"text-[10px] text-gray-600 border border-white/10 px-1 rounded",children:"âŒ˜K"})]}),e.jsx("button",{onClick:$,className:"p-2 hover:bg-white/10 rounded text-gray-500 hover:text-white transition-colors",children:e.jsx(E,{size:16})}),e.jsx("div",{className:"w-8 h-8 rounded bg-gradient-to-tr from-gray-700 to-gray-600 border border-white/10"})]})]}),e.jsxs("main",{className:"p-6 max-w-[1600px] mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bento-grid p-5 bento-cell group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-label",children:s("dashboard.agency.total_revenue")}),e.jsx("div",{className:"p-1.5 bg-green-500/10 rounded text-green-500",children:e.jsx(A,{size:14})})]}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("h2",{className:"text-3xl font-mono font-medium tracking-tighter text-white",children:(x.totalRevenue||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-green-500/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"bento-grid p-5 bento-cell group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-label",children:s("dashboard.agency.active_workspaces")}),e.jsx(L,{maxLength:16,className:"text-gray-600 group-hover:text-white transition-colors"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h2",{className:"text-3xl font-mono font-medium tracking-tighter text-white",children:x.activeClients}),e.jsxs("span",{className:"text-xs text-gray-500",children:["/ 20 ",s("dashboard.agency.slots")]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"bento-grid p-5 bento-cell group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-label",children:s("dashboard.stats.pending")}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500 animate-pulse"})})]}),e.jsx("h2",{className:"text-3xl font-mono font-medium tracking-tighter text-white",children:x.pendingApprovals}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-orange-500/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"bento-grid p-5 bento-cell group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-label",children:s("dashboard.stats.health")}),e.jsx(R,{size:16,className:"text-gray-600 group-hover:text-green-500 transition-colors"})]}),e.jsxs("h2",{className:"text-3xl font-mono font-medium tracking-tighter text-white",children:[x.avgHealth,"%"]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),o==="overview"&&e.jsxs("div",{className:"pt-4 animate-fadeIn",style:{animationDelay:"0.1s"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[e.jsx(G,{size:14,className:"text-gray-500"}),s("dashboard.agency.client_workspaces")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-ghost",children:s("common.filter")}),e.jsxs("button",{className:"btn-primary",children:["+ ",s("dashboard.agency.new_workspace")]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-px bg-[var(--border-subtle)] border border-[var(--border-subtle)] rounded-lg overflow-hidden",children:n.map(a=>e.jsxs("div",{"data-testid":`agency-client-card-${a.id}`,className:"bg-[var(--bg-surface)] hover:bg-[#151515] p-6 transition-all group flex flex-col justify-between h-48 relative",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-white/5 border border-white/10 flex items-center justify-center text-xs font-bold text-gray-300",children:a.name.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-gray-200 group-hover:text-white",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a.status==="critical"?"bg-red-500":a.status==="attention"?"bg-orange-500":"bg-green-500"}`}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest leading-none",children:a.status})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-label",children:s("dashboard.agency.monthly_rev")}),e.jsx("p",{className:"text-mono-data text-white",children:(a.revenue||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-label",children:s("dashboard.agency.head")}),e.jsx("p",{className:"text-mono-data text-white",children:a.responsible})]})]})]}),e.jsxs("button",{onClick:()=>B(a),"data-testid":`agency-access-os-${a.id}`,className:"mt-4 w-full h-8 flex items-center justify-center gap-2 text-[11px] font-bold uppercase tracking-wide border border-white/10 rounded transition-all text-gray-500 opacity-100 translate-y-0 active:bg-white active:text-black md:hover:bg-white md:hover:text-black md:opacity-0 md:group-hover:opacity-100 md:translate-y-2 md:group-hover:translate-y-0 duration-200",children:[s("dashboard.actions.access_os")," ",e.jsx(H,{size:12})]})]},a.id))})]}),o==="financials"&&e.jsx("div",{className:"pt-4 animate-fadeIn",children:e.jsxs("div",{className:"bento-grid p-8 text-center",children:[e.jsx(A,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s("dashboard.nav.financials")}),e.jsx("p",{className:"text-gray-500",children:s("dashboard.agency.coming_soon")})]})}),o==="team"&&e.jsx("div",{className:"pt-4 animate-fadeIn",children:e.jsxs("div",{className:"bento-grid p-8 text-center",children:[e.jsx(L,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s("dashboard.nav.team")}),e.jsx("p",{className:"text-gray-500",children:s("dashboard.agency.coming_soon")})]})}),o==="audit"&&e.jsx("div",{className:"pt-4 animate-fadeIn",children:e.jsxs("div",{className:"bento-grid p-8 text-center",children:[e.jsx(R,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s("dashboard.nav.audit")}),e.jsx("p",{className:"text-gray-500",children:s("dashboard.agency.coming_soon")})]})})]})]})}export{V as AgencyDashboard};
